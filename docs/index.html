<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><link rel="canonical" href="https://docs.karmanivero.us/npm-package-template-ts/"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@karmaniverous/npm-package-template-ts</title><meta name="description" content="Documentation for @karmaniverous/npm-package-template-ts"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@karmaniverous/npm-package-template-ts</a><div id="tsd-toolbar-links"><a href="https://github.com/karmaniverous/npm-package-template-ts">GitHub</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@karmaniverous/npm-package-template-ts</h1></div><div class="tsd-panel tsd-typography"><h1 id="typescript-npm-package-template" class="tsd-anchor-link">TypeScript NPM Package Template<a href="#typescript-npm-package-template" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><blockquote>
<p><em>üëá Some of these badges only activate when you publish your package!</em></p>
</blockquote>
<p><a href="https://www.npmjs.com/package/@karmaniverous/npm-package-template-ts" target="_blank" class="external"><img src="https://img.shields.io/npm/v/@karmaniverous/npm-package-template-ts.svg" alt="npm version"></a>
<img src="https://img.shields.io/node/v/@karmaniverous/npm-package-template-ts" alt="Node Current">
<a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/LICENSE.md" target="_blank" class="external"><img src="https://img.shields.io/badge/license-BSD--3--Clause-blue.svg" alt="license"></a></p>
<p><strong>Writing great TypeScript is only half the battle!</strong> You also need to instrument it, format it, lint it, test it, bundle it, document it, and publish it!</p>
<p>Getting all of these pieces to work gracefully together is not trivial.</p>
<p>This template puts those pieces together in a way that just WORKS, right out of the box, so you can focus on your code. It includes fully-configured support for:</p>
<p>‚úÖ <a href="#code-authoring">Code authoring</a> with <a href="https://www.typescriptlang.org/" target="_blank" class="external">TypeScript</a>.<br>
‚úÖ <a href="#inline-documentation">Inline documentation</a> with <a href="https://tsdoc.org/" target="_blank" class="external">TSDoc</a>.<br>
‚úÖ <a href="#cli-generation">CLI generation</a> with <a href="https://www.npmjs.com/package/commander" target="_blank" class="external">Commander</a>.<br>
‚úÖ <a href="#formatting">Code formatting</a> with <a href="https://prettier.io/" target="_blank" class="external">Prettier</a>.<br>
‚úÖ <a href="#linting">Linting</a> with <a href="https://eslint.org/" target="_blank" class="external">ESLint</a>.<br>
‚úÖ <a href="#unit-testing">Unit testing</a> with <a href="https://vitest.dev/" target="_blank" class="external">Vitest</a>.<br>
‚úÖ <a href="#package-pruning">Package pruning</a> with <a href="https://github.com/webpro-nl/knip" target="_blank" class="external">Knip</a>.<br>
‚úÖ <a href="#bundling">Bundling</a> with <a href="https://rollupjs.org/" target="_blank" class="external">Rollup</a>.<br>
‚úÖ <a href="#publishing">Publishing</a> with <a href="https://github.com/release-it/release-it" target="_blank" class="external">ReleaseIt</a>.<br>
‚úÖ <a href="#git-hooks">Git hooks</a> with <a href="https://github.com/evilmartians/lefthook" target="_blank" class="external">Lefthook</a>.<br>
‚úÖ <a href="#api-documentation">API documentation</a> generated by [TypeDoc].<br>
‚úÖ Recommended extensions &amp; settings wherever appropriate.<br></p>
<h2 id="getting-started" class="tsd-anchor-link">Getting Started<a href="#getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Create a new repo using this template! When you clone it locally, be sure to run:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1">                 </span><span class="hl-3"># install dependencies</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">lefthook</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1">  </span><span class="hl-3"># install Git hooks</span>
</code><button type="button">Copy</button></pre>

<p>Also, type <code>@recommended</code> into the VSCode Extensions sidebar and install the recommended extensions!</p>
<p>Change all repository &amp; personal references in <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/package.json" target="_blank" class="external"><code>package.json</code></a> &amp; <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/typedoc.json" target="_blank" class="external"><code>typedoc.json</code></a> to reflect your own info.</p>
<p>Before your first commit, be sure to reset your project's version number (e.g. to <code>0.0.0</code>) in <code>package.json</code>.</p>
<p>To streamline the release process from your desktop, set up a GitHub <a href="https://github.com/settings/tokens" target="_blank" class="external">Personal Access Token</a> and follow the instructions in <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.env.local.template" target="_blank" class="external"><code>.env.local.template</code></a>.</p>
<h2 id="code-authoring" class="tsd-anchor-link">Code Authoring<a href="#code-authoring" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You want to write straight TS code without having to jump through weird hoops like adding a <code>.js</code> extension to your TS imports. (<a href="https://stackoverflow.com/questions/75807785/why-do-i-need-to-include-js-extension-in-typescript-import-for-custom-module" target="_blank" class="external">Click here</a> to dive into that hole. üôÑ)</p>
<p>Long story short: you can. Just write your code in the <code>src</code> directory and import it as you would any other module. The <a href="#bundling">bundling process</a> will take care of the rest.</p>
<h2 id="inline-documentation" class="tsd-anchor-link">Inline Documentation<a href="#inline-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This template uses <a href="https://tsdoc.org/" target="_blank" class="external">TSDoc</a> for inline documentation. TSDoc is similar to JSDoc, but is way less verbose as it can take advantage of TypeScript's type system. It also has better support for documenting generics and other TypeScript-specific features.</p>
<p>TSdoc comments are automatically included in your bundled code, so you can use them to document your code for IntelliSense in JavaScript as well as TypeScript.</p>
<p>The template also includes linting support for your TSDoc comments to keep you out of trouble. Just run <code>npm run lint</code> to check your comments along with the rest of your code, and be sure to check out the great <a href="https://tsdoc.org/" target="_blank" class="external">TSDoc documentation</a> for more details!</p>
<p>Also note that this template generates <a href="#api-documentation">API Documentation</a> with <a href="https://typedoc.org/" target="_blank" class="external">TypeDoc</a>. The TypeDoc spec includes a few tags that TSDoc doesn't support. <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/tsdoc.json" target="_blank" class="external"><code>tsdoc.json</code></a> specifies these extra tags and ensures you can use them in your code without generating ESLint warnings!</p>
<h2 id="cli-generation" class="tsd-anchor-link">CLI Generation<a href="#cli-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This template uses <a href="https://www.npmjs.com/package/commander" target="_blank" class="external">Commander</a> to generate a CLI for your package.</p>
<p>Given that your underlying library is solid, wrapping it into a CLI is fairly straightforward. Just follow these steps:</p>
<ol>
<li>
<p>All of your CLI-specific code should live in the <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/src/cli/" target="_blank" class="external"><code>src/cli</code></a> directory, but can import code from across your package as required. Each subdirectory here is the root of a CLI command. You can have as many as you want, but this template includes a single example called <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/src/cli/mycli/" target="_blank" class="external"><code>mycli</code></a>.</p>
</li>
<li>
<p>The <code>index.ts</code> file in each named CLI subdirectory will be picked up by the <a href="#bundling">bundler</a> and compiled into a CLI command with the same name as the subdirectory. So <code>src/cli/mycli/index.ts</code> will be compiled into <code>dist/mycli.cli.mjs</code>.</p>
</li>
<li>
<p>The <code>bin</code> field in <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/package.json" target="_blank" class="external"><code>package.json</code></a> must specifically reference each of these compiled CLI commands. On installation, you can then execute your CLI command like this:</p>
</li>
</ol>
<pre><code class="bash"><span class="hl-1">&gt; npx mycli      </span><span class="hl-3"># if installed localy</span><br/><br/><span class="hl-1">&gt; mycli          </span><span class="hl-3"># if installed globally</span><br/><br/><span class="hl-3"># this is what you get...</span><br/><br/><span class="hl-0">Usage:</span><span class="hl-1"> </span><span class="hl-2">mycli</span><span class="hl-1"> [options] [command]</span><br/><br/><span class="hl-0">My</span><span class="hl-1"> </span><span class="hl-2">CLI</span><span class="hl-1"> </span><span class="hl-2">tool</span><br/><br/><span class="hl-0">Options:</span><br/><span class="hl-1">  </span><span class="hl-0">-h,</span><span class="hl-1"> </span><span class="hl-4">--help</span><span class="hl-1">      </span><span class="hl-2">display</span><span class="hl-1"> </span><span class="hl-2">help</span><span class="hl-1"> </span><span class="hl-2">for</span><span class="hl-1"> </span><span class="hl-2">command</span><br/><br/><span class="hl-0">Commands:</span><br/><span class="hl-1">  </span><span class="hl-0">foo</span><span class="hl-1"> [options]   Foos your bar.</span><br/><span class="hl-1">  </span><span class="hl-0">help</span><span class="hl-1"> [command]  display help </span><span class="hl-5">for</span><span class="hl-1"> command</span>
</code><button type="button">Copy</button></pre>

<p>Providing a detailed tutorial on Commander is really out of scope for this README, but this repo demonstrates a simple example with a single subcommand abstracted into a separate dependency.</p>
<p>You can build on this example to create a MUCH more complex CLI! See the <a href="https://www.npmjs.com/package/commander" target="_blank" class="external">Commander documentation</a> for more details.</p>
<p><strong>If your project requires an extensive, config-driven CLI, you might want to use my <a href="https://github.com/karmaniverous/get-dotenv-child" target="_blank" class="external">get-dotenv-child</a> template instead!</strong></p>
<h2 id="formatting" class="tsd-anchor-link">Formatting<a href="#formatting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Code formatting is provided by <a href="https://prettier.io" target="_blank" class="external">Prettier</a>.</p>
<p>Just run <code>npm run lint</code> to lint &amp; format your code, or <code>npm run lint:fix</code> to resolve any issues automatically if possible.</p>
<p>The <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" class="external">Prettier extension</a> is included in the template's VSCode <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.vscode/extensions.json" target="_blank" class="external">workspace recommendations</a>, and the template contains related <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.vscode/settings.json" target="_blank" class="external">workspace settings</a>, so be sure to install recommended extensions when prompted!</p>
<h2 id="linting" class="tsd-anchor-link">Linting<a href="#linting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Linting services are provided by <a href="https://eslint.org" target="_blank" class="external">ESLint</a>.</p>
<p>Just run <code>npm run lint</code> to lint your code, or <code>npm run lint:fix</code> to resolve any issues automatically if possible. These commands also run Prettier to identify &amp; fix formatting issues.</p>
<p>The <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" class="external">ESLint extension</a> is included in the template's VSCode <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.vscode/extensions.json" target="_blank" class="external">workspace recommendations</a>, and the template contains related <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.vscode/settings.json" target="_blank" class="external">workspace settings</a>, so be sure to install recommended extensions when prompted!</p>
<h2 id="unit-testing" class="tsd-anchor-link">Unit Testing<a href="#unit-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Unit test support is provided by <a href="https://vitest.dev" target="_blank" class="external">Vitest</a>.</p>
<p>Any file containing <code>.test.</code> in its name (e.g. <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/src/foo.test.ts" target="_blank" class="external"><code>foo.test.ts</code></a>) will be treated as a test file and executed by Vitest. See <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/vitest.config.ts" target="_blank" class="external"><code>vitest.config.ts</code></a> for configuration details.</p>
<p>Just run <code>npm run test</code> to execute your tests.</p>
<p>Test coverage reporting is provided by <a href="https://vitest.dev/guide/coverage.html" target="_blank" class="external">Vitest</a> and runs every time you execute your tests. If you execute your tests from the command line, you will see a coverage report at the bottom of the run. You can also see a prettier version of this report by opening <code>coverage/lcov-report/index.html</code> in your browser.</p>
<p>The <a href="https://marketplace.visualstudio.com/items?itemName=ZixuanChen.vitest-explorer" target="_blank" class="external">Vitest extension</a> is a great way to execute &amp; debug your Vitest tests! It's included in the template's VSCode <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.vscode/extensions.json" target="_blank" class="external">workspace recommendations</a>, and the template contains related <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.vscode/settings.json" target="_blank" class="external">workspace settings</a>, so be sure to install recommended extensions when prompted!</p>
<h2 id="package-pruning" class="tsd-anchor-link">Package Pruning<a href="#package-pruning" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://github.com/webpro-nl/knip" target="_blank" class="external">Knip</a> is a great command-line tool that finds unused files, dependencies and exports in your TypeScript project. Less code and dependencies lead to improved performance, less maintenance and easier refactorings!</p>
<p>This template integrates Knip into your build process so you can prune your package at every release. Edit the <a href="https://github.com/karmaniverous/npm-package-template-ts/blob/main/knip.json" target="_blank" class="external">config file</a> to add any new cutouts, and run <code>npm run knip</code> to prune your package on demand!</p>
<h2 id="bundling" class="tsd-anchor-link">Bundling<a href="#bundling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This template uses <a href="https://rollupjs.org" target="_blank" class="external">Rollup</a> to bundle your code. See the <a href="#references">References</a> section for more detailed notes. It creates several kinds of outputs:</p>
<ul>
<li>ESM, for import into most TS/JS code.</li>
<li>IIFE (<a href="https://medium.com/@rabailzaheer/iife-explained-immediately-invoked-function-expressions-fccd8f53123d" target="_blank" class="external">Immediately Invoked Function Expression</a>), for direct browser import.</li>
<li>CJS, for lulz.</li>
<li>Type definition files to support TypeScript imports and power IntelliSense in Javascript.</li>
<li>CLI commands for execution from your command line. See the <a href="#cli-generation">CLI Generation</a> section for details. Don't forget to update the <code>bin</code> field in <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/package.json" target="_blank" class="external"><code>package.json</code></a>!</li>
</ul>
<p>Type declarations are properly bundled and should be available no matter how your package is imported.</p>
<p>Just run <code>npm run build</code> to bundle your code, and the output will be in the <code>dist</code> directory.</p>
<p>See <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/rollup.config.ts" target="_blank" class="external"><code>rollup.config.ts</code></a> for details. If you don't need all of the output types listed above, it should be fairly straightforward to modify this file to suit your needs.</p>
<h3 id="incremental-build-warning" class="tsd-anchor-link">Incremental Build Warning<a href="#incremental-build-warning" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Incremental builds are turned on in this template. This will save you some build time, but <a href="https://www.npmjs.com/package/@rollup/plugin-typescript" target="_blank" class="external"><code>@rollup/plugin-typescript</code></a> will emit the following warning at build time:</p>
<pre><code class="bash"><span class="hl-1">(!) [plugin typescript] </span><span class="hl-0">@rollup/plugin-typescript:</span><span class="hl-1"> </span><span class="hl-2">outputToFilesystem</span><span class="hl-1"> </span><span class="hl-2">option</span><span class="hl-1"> </span><span class="hl-2">is</span><span class="hl-1"> </span><span class="hl-2">defaulting</span><span class="hl-1"> </span><span class="hl-2">to</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-2">.</span>
</code><button type="button">Copy</button></pre>

<p>This is a <a href="https://github.com/rollup/plugins/issues/1227" target="_blank" class="external">known issue</a> and should have no negative effect on your build. If you can figure out how to suppress this warning, please <a href="https://github.com/karmaniverous/npm-package-template-ts/issues/11" target="_blank" class="external">submit a PR</a>!</p>
<h3 id="external-dependencies" class="tsd-anchor-link">External Dependencies<a href="#external-dependencies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/rollup.config.ts" target="_blank" class="external"><code>rollup.config.ts</code></a> is configured to treat all non-dev and peer dependencies listed in <code>package.json</code> as external dependencies. This means...</p>
<ul>
<li>
<p>These dependencies will not be bundled into your package, but should be installed as a matter of course when you run <code>npm install</code>.</p>
</li>
<li>
<p>Your distribution files will be located in your dist directory as specified in your <code>package.json</code> exports field (e.g. <code>dist/mjs/index.js</code>).</p>
</li>
</ul>
<p>It is possible for external dependencies to creep into your build. For example, let's say you have a dev dependency that you referenced in runtime code, but is actually included as a runtime dependency by some other package. In this case...</p>
<ul>
<li>
<p>the dependency would <em>not</em> be listed as an external dependency by <code>rollup.config.ts</code>, and</p>
</li>
<li>
<p>your distribution files would shift to <code>dist/mjs/src/index.js</code>, breaking your package.</p>
</li>
</ul>
<p>To prevent this, simply list the dependency as a regular dependency in your <code>package.json</code> file... <strong>which is exactly where it belongs anyway!</strong></p>
<p>This will restore the structure of your build AND ensure proper tree-shaking of your dependencies.</p>
<h2 id="publishing" class="tsd-anchor-link">Publishing<a href="#publishing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This template uses <a href="https://github.com/release-it/release-it" target="_blank" class="external">ReleaseIt</a> to create a release on GitHub and publish your package to NPM.</p>
<p>Just run <code>npm run release</code> and the following will happen:</p>
<ul>
<li>ESLint will lint your code.</li>
<li>Vitest will execute your tests and assess code coverage. Open <code>coverage/lcov-report/index.html</code> to see the results.</li>
<li>Rollup will bundle your code.</li>
<li>TypeDoc will generate &amp; commit your API documentation.</li>
<li>ReleaseIt will create a release on GitHub and publish your package to NPM.</li>
</ul>
<p>To preserve Git Flow integrity, <code>npm run release</code> will only run on the <code>main</code> branch. It is often useful, though, to create a pre-release version from a feature branch. To do this, run <code>npm run release:pre</code> on any branch.</p>
<p>See the <code>release-it</code> section in <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/package.json" target="_blank" class="external"><code>package.json</code></a> for details.</p>
<h2 id="validating-your-package" class="tsd-anchor-link">Validating Your Package<a href="#validating-your-package" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Use <a href="https://arethetypeswrong.github.io/" target="_blank" class="external">this awesome utility</a> to validate that the types in your package are actually accessible in key target development environments.</p>
<h2 id="git-hooks" class="tsd-anchor-link">Git Hooks<a href="#git-hooks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This template assumes you will be using something like <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow" target="_blank" class="external">Git Flow</a> with a <a href="https://medium.com/@abhay.pixolo/naming-conventions-for-git-branches-a-cheatsheet-8549feca2534" target="_blank" class="external">strong Git branch naming convention</a>.</p>
<p>The template uses <a href="https://evilmartians.com/opensource/lefthook" target="_blank" class="external">Lefthook</a> to perform two services:</p>
<ul>
<li>
<p>It will prevent you from committing to a branch with an invalid name. See the <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.lefthook/pre-commit/branch-naming-policy" target="_blank" class="external"><code>branch-naming-policy</code></a> script for details.</p>
</li>
<li>
<p>If your branch name begins with a standard-format issue number (e.g. <a href="https://github.com/karmaniverous/npm-package-template-ts/issues/1" target="_blank" class="external">GH-1</a>) it will prefix your commit message with the issue number. This is a great way to keep your commits organized and linked to the issues they address! See the <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/.lefthook/prepare-commit-msg/add-issue" target="_blank" class="external"><code>add-issue</code></a> script for details.</p>
</li>
</ul>
<p>To activate this functionality, be sure to run <code>npx lefthook install</code> after cloning the repository &amp; installing dependencies!</p>
<h2 id="api-documentation" class="tsd-anchor-link">API Documentation<a href="#api-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This is really slick!</p>
<p>If you've been careful to document your code according to <a href="https://tsdoc.org/" target="_blank" class="external">TSDoc</a> conventions, then when you run <code>npm run docs</code> or <code>npm run build</code>, <a href="https://typedoc.org/" target="_blank" class="external">TypeDoc</a> will generate API documentation, wrap it up with your README file, and publish it in browsable form to the <code>docs</code> directory of your repo.</p>
<p>You can alter the outcome by editing <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/typedoc.json" target="_blank" class="external"><code>typedoc.json</code></a>. See the <a href="https://typedoc.org/options/" target="_blank" class="external">TypeDoc options documentation</a> for more info.</p>
<p>Update your repository's GitHub Pages settings as illustrated below, and this site will be published to <code>&lt;your GitHub username&gt;.github.io/&lt;your repo name&gt;</code>. You can also assign it a custom domain.</p>
<p><img src="media/github-pages-config.png" alt="GitHub Pages Settings"></p>
<p>If you already have a custom domain set up for a GitHub Pages site at <code>&lt;your GitHub username&gt;.github.io</code>, this documentation will appear at <code>&lt;your custom domain&gt;/&lt;your repo name&gt;</code>.</p>
<p>For example, see <a href="https://docs.karmanivero.us/npm-package-template-ts">https://docs.karmanivero.us/npm-package-template-ts</a>.</p>
<p>Finally, note that this README file contains a link in the header to this documentation site that does NOT appear in the copy of the README on the documentation site's home page.</p>
<p>This is accomplished with the <a href="https://www.npmjs.com/package/typedoc-plugin-replace-text" target="_blank" class="external"><code>typedoc-plugin-replace-text</code></a> TypeDoc plugin. It's already installed &amp; configured in this template, and using it is really simple. Just enclose any Markdown you'd like to exclude from the documentation site in a pair of special Markdown comment tags like this:</p>
<pre><code class="md">
</code><button type="button">Copy</button></pre>

<p>Anything between these tags (as well as the tags themselves) will be excluded from the documentation site. Note that you can also use these tags to exclude content from your inline Typescript documenation!</p>
<p>Some tips:</p>
<ul>
<li>When TypeDoc finds a relative link in your README to an asset in your repo, it will copy that asset to the <code>media</code> directory of the documentation site. This is fine for images, but you probably want source code links to continue to point to the source code file in its original location. To accomplish this, just use the full URL to the file instead of a relative link.</li>
</ul>
<blockquote>
<p>Do you know how to restrict this behavior to certain file extensions? <a href="https://github.com/karmaniverous/npm-package-template-ts/discussions" target="_blank" class="external">Start a discussion</a> and let me know!</p>
</blockquote>
<ul>
<li>
<p>The organization of your documentation site mostly reflects the organization of your code. So make full use of the <a href="https://typedoc.org/guides/tags/" target="_blank" class="external">tags</a> supported by TypeDoc!</p>
</li>
<li>
<p>I added convenient links in <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/typedoc.json" target="_blank" class="external"><code>typedoc.json</code></a> to the project GitHub repository and my GitHub profile. You'll want to change these to reflect your own info.</p>
</li>
</ul>
<p>Also note that this template generates <a href="#api-documentation">API Documentation</a> with <a href="https://typedoc.org/" target="_blank" class="external">TypeDoc</a>. The TypeDoc spec includes a few tags that TSDoc doesn't support. <a href="https://github.com/karmaniverous/npm-package-template-ts/tree/main/tsdoc.json" target="_blank" class="external"><code>tsdoc.json</code></a> specifies these extra tags and ensures you can use them in your code without generating ESLint warnings!</p>
<h2 id="references" class="tsd-anchor-link">References<a href="#references" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>
<p><a href="https://blog.logrocket.com/building-typescript-cli-node-js-commander/" target="_blank" class="external">Building a TypeScript CLI with Node.js and Commander</a></p>
</li>
<li>
<p><a href="https://datomarjanidze.medium.com/bundling-typescript-in-different-formats-with-rollup-js-3397b3a84e4e" target="_blank" class="external">Bundling TypeScript in different formats with rollup.js</a></p>
</li>
<li>
<p><a href="https://medium.com/@abhay.pixolo/naming-conventions-for-git-branches-a-cheatsheet-8549feca2534" target="_blank" class="external">Naming conventions for Git Branches ‚Äî a Cheatsheet</a></p>
</li>
<li>
<p><a href="https://www.kravchyk.com/typescript-npm-package-json-exports/" target="_blank" class="external">TypeScript and NPM package.json exports the 2024 way</a>. Note that <a href="https://www.kravchyk.com/typescript-npm-package-json-exports/#:~:text=the%20types%20may%20need%20to%20be%20.d.cjs" target="_blank" class="external">this snippet</a> is wrong; it should read <em>the types may need to be <code>.d.cts</code></em>. That's how this template is implemented. Also note that we're just using a second (and third) <code>rollup</code> type declarations target instead of employing <a href="https://www.npmjs.com/package/rollup-plugin-copy" target="_blank" class="external">rollup-plugin-copy</a> as suggested in the article.</p>
</li>
</ul>
<hr>
<p>Built for you with ‚ù§Ô∏è on Bali! Find more great tools &amp; templates on <a href="https://github.com/karmaniverous" target="_blank" class="external">my GitHub Profile</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#typescript-npm-package-template"><span>Type<wbr/>Script <wbr/>NPM <wbr/>Package <wbr/>Template</span></a><ul><li><a href="#getting-started"><span>Getting <wbr/>Started</span></a></li><li><a href="#code-authoring"><span>Code <wbr/>Authoring</span></a></li><li><a href="#inline-documentation"><span>Inline <wbr/>Documentation</span></a></li><li><a href="#cli-generation"><span>CLI <wbr/>Generation</span></a></li><li><a href="#formatting"><span>Formatting</span></a></li><li><a href="#linting"><span>Linting</span></a></li><li><a href="#unit-testing"><span>Unit <wbr/>Testing</span></a></li><li><a href="#package-pruning"><span>Package <wbr/>Pruning</span></a></li><li><a href="#bundling"><span>Bundling</span></a></li><li><ul><li><a href="#incremental-build-warning"><span>Incremental <wbr/>Build <wbr/>Warning</span></a></li><li><a href="#external-dependencies"><span>External <wbr/>Dependencies</span></a></li></ul></li><li><a href="#publishing"><span>Publishing</span></a></li><li><a href="#validating-your-package"><span>Validating <wbr/>Your <wbr/>Package</span></a></li><li><a href="#git-hooks"><span>Git <wbr/>Hooks</span></a></li><li><a href="#api-documentation"><span>API <wbr/>Documentation</span></a></li><li><a href="#references"><span>References</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/karmaniverous/npm-package-template-ts" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="modules.html">@karmaniverous/npm-package-template-ts</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
